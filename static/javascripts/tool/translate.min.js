var typeSelect={baidu:"百度翻译",bing:"必应翻译"};var baiduSelect={zh:"中文",en:"英语",jp:"日语",th:"泰语",ru:"俄罗斯语",pt:"葡萄牙语",de:"德语",it:"意大利语",nl:"荷兰语",el:"希腊语",kor:"韩语",spa:"西班牙语",fra:"法语",ara:"阿拉伯语",yue:"粤语",wyw:"文言文",auto:"自动检测"};var bingSelect={ar:"Arabic","bs-Latn":"Bosnian (Latin)",bg:"Bulgarian",ca:"Catalan","zh-CHS":"Chinese Simplified","zh-CHT":"Chinese Traditional",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch",en:"English",et:"Estonian",fi:"Finnish",fr:"French",de:"German",el:"Greek",ht:"Haitian Creole",he:"Hebrew",hi:"Hindi",mww:"Hmong Daw",hu:"Hungarian",id:"Indonesian",it:"Italian",ja:"Japanese",sw:"Kiswahili",tlh:"Klingon","tlh-Qaak":"Klingon (pIqaD)",ko:"Korean",lv:"Latvian",lt:"Lithuanian",ms:"Malay",mt:"Maltese",no:"Norwegian",fa:"Persian",pl:"Polish",pt:"Portuguese",otq:"Querétaro Otomi",ro:"Romanian",ru:"Russian","sr-Cyrl":"Serbian (Cyrillic)","sr-Latn":"Serbian (Latin)",sk:"Slovak",sl:"Slovenian",es:"Spanish",sv:"Swedish",th:"Thai",tr:"Turkish",uk:"Ukrainian",ur:"Urdu",vi:"Vietnamese",cy:"Welsh",yua:"Yucatec Maya"};var dictTypeSelect={iciba:"金山词霸",urban:"Urban"};function setSelect(d,c){var b="";for(var a in c){if(c.hasOwnProperty(a)){b+="<option value="+a+">"+c[a]+"</option>"}}$("#"+d).html(b)}setSelect("dictType",dictTypeSelect);setSelect("type",typeSelect);setSelect("from",baiduSelect);setSelect("to",baiduSelect);$("#from").val("en");$("#to").val("zh");$("#type").on("change",function(){var a=$("#type").val();switch(a){case"baidu":setSelect("from",baiduSelect);setSelect("to",baiduSelect);$("#from").val("en");$("#to").val("zh");break;case"bing":setSelect("from",bingSelect);setSelect("to",bingSelect);$("#from").val("en");$("#to").val("zh-CHS");break;default:setSelect("from",baiduSelect);setSelect("to",baiduSelect);$("#from").val("en");$("#to").val("zh");break}});$("#translate").on("click",function(){var a=$("#type").val();var b=$("#query").val().trim();var d=$("#from").val();var c=$("#to").val();if(b){$.post("./api/translate",{type:a,query:b,from:d,to:c},function(f){var e="";if(a==="baidu"){f=JSON.parse(f);e=f.retData.trans_result[0].dst}if(a==="bing"){e=f.replace(/["\\]/g,"")}$("#result").html(e)})}});$("#search").on("click",function(){var a=$("#dictType").val();var b=$("#word").val().trim();if(b){$.post("./api/dictionary",{type:a,word:b},function(d){var c="";switch(a){case"iciba":c=icibaHandler(d);break;case"urban":c=urbanHanlder(d);break;default:c=icibaHandler(d);break}$("#detail").html(c)})}});$("#detail").on("click",".glyphicon-volume-up",function(){var b=$(this).attr("data-src");var a=$("#play")[0];a.src=b;a.play()});function icibaHandler(f){if(!f){return"<h3>居然没查到！(￣^￣)</h3>"}f=JSON.parse(f);var a=[];a.push("<h3>"+f.word_name+"</h3>");var d=f.symbols[0];var e="";if(d.ph_en){e+="<b>英</b>【"+d.ph_en+"】";if(d.ph_en_mp3){e+='<span class="glyphicon glyphicon-volume-up" aria-hidden="true" data-src="'+d.ph_en_mp3+'"></span>'}}if(d.ph_am){e+="<b>美</b>【"+d.ph_am+"】";if(d.ph_am_mp3){e+='<span class="glyphicon glyphicon-volume-up" aria-hidden="true" data-src="'+d.ph_am_mp3+'"></span>'}}a.push("<p>"+e+"</p>");var c=f.exchange;var h="";var b=[];if(c.word_third){b.push("第三人称："+c.word_third.join("，"))}if(c.word_past){b.push("过去时："+c.word_past.join("，"))}if(c.word_done){b.push("完成时："+c.word_done.join("，"))}if(c.word_ing){b.push("进行时："+c.word_ing.join("，"))}h=b.join("；");a.push("<p>"+h+"</p>");var g=d.parts;g.forEach(function(k,j){var i=k.part+" "+k.means.join("；");a.push("<p>"+i+"</p>")});return a.join("")}function urbanHanlder(c){if(!c){return"<h3>Not found. ( p_q)</h3>"}c=JSON.parse(c);var a="http://www.urbandictionary.com/define.php?term="+c.word+"&defid="+c.defid;var b='<h3><a href="'+a+'" target="_blank">'+c.word+"</a></h3><p>"+c.definition.replace(/\n/g,"<br/>")+"</p>";if(c.example){b+="<p>"+c.example.replace(/\n/g,"<br/>")+"</p>"}if(c.author){b+='<p>By <a href="'+a+'" target="_blank">'+c.author+"</a>";if(c.thumbs_up){b+='<span class="glyphicon glyphicon-thumbs-up" aria-hidden="true"></span>'+c.thumbs_up}if(c.thumbs_down){b+='<span class="glyphicon glyphicon-thumbs-down" aria-hidden="true"></span>'+c.thumbs_down}b+="</p>"}return b};